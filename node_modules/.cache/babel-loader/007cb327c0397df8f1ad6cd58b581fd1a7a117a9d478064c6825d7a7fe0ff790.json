{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MARCIOJOSEDOSSANTOS\\\\Desktop\\\\tentativas\\\\biblioteca\\\\frontend\\\\src\\\\components\\\\BookCard.js\";\n// src/components/BookCard.js\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport \"./bookcard.css\";\nimport noCover from \"../assets/no-cover.png\";\nimport LoanButton from \"./LoanButton\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function BookCard({\n  book,\n  refreshBooks = null,\n  canLoan = false\n}) {\n  var _book$loans;\n  // ðŸ”¹ Define URL completa da capa (caso backend retorne apenas caminho relativo)\n  const coverUrl = book.cover ? book.cover.startsWith(\"http\") ? book.cover : `http://127.0.0.1:8000${book.cover}` : noCover;\n\n  // ðŸ”¹ Texto descritivo para acessibilidade\n  const bookLabel = `\n    Livro: ${book.title || \"Sem tÃ­tulo\"}.\n    Autor: ${book.author || \"NÃ£o informado\"}.\n    ${book.publication_year ? `Ano: ${book.publication_year}.` : \"\"}\n    ${book.genre ? `GÃªnero: ${book.genre}.` : \"\"}\n    Status: ${book.available ? \"DisponÃ­vel\" : \"Emprestado\"}.\n  `;\n  return /*#__PURE__*/_jsxDEV(\"article\", {\n    className: `book-card ${!book.available ? \"unavailable\" : \"\"}`,\n    role: \"region\",\n    \"aria-label\": bookLabel.trim(),\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: coverUrl,\n      alt: book.altText || `Capa do livro \"${book.title || \"Sem tÃ­tulo\"}\"`,\n      className: \"book-cover\",\n      loading: \"lazy\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"book-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: book.title || \"Sem tÃ­tulo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Autor:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this), \" \", book.author || \"NÃ£o informado\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this), book.publication_year && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Ano:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 13\n        }, this), \" \", book.publication_year]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 11\n      }, this), book.genre && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"G\\xEAnero:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 13\n        }, this), \" \", book.genre]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Status:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this), \" \", book.available ? \"DisponÃ­vel\" : \"Emprestado\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), ((_book$loans = book.loans) === null || _book$loans === void 0 ? void 0 : _book$loans.length) > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Emprestado para:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this), \" \", book.loans.map(loan => loan.user_username || loan.username).filter(Boolean).join(\", \")]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this), book.speak && /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: book.speak,\n        className: \"speak-button\",\n        \"aria-label\": `Ouvir informaÃ§Ãµes do livro ${book.title}`,\n        children: \"\\uD83D\\uDD0A Ouvir\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this), canLoan && book.available && refreshBooks && /*#__PURE__*/_jsxDEV(LoanButton, {\n        bookId: book.id,\n        refreshBooks: refreshBooks\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 5\n  }, this);\n}\n_c = BookCard;\nBookCard.propTypes = {\n  book: PropTypes.shape({\n    id: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n    title: PropTypes.string.isRequired,\n    author: PropTypes.string,\n    publication_year: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    genre: PropTypes.string,\n    cover: PropTypes.string,\n    altText: PropTypes.string,\n    available: PropTypes.bool,\n    loans: PropTypes.arrayOf(PropTypes.shape({\n      username: PropTypes.string,\n      user_username: PropTypes.string\n    })),\n    speak: PropTypes.func\n  }).isRequired,\n  refreshBooks: PropTypes.func,\n  canLoan: PropTypes.bool // ðŸ”¥ nova propriedade\n};\nvar _c;\n$RefreshReg$(_c, \"BookCard\");","map":{"version":3,"names":["React","PropTypes","noCover","LoanButton","jsxDEV","_jsxDEV","BookCard","book","refreshBooks","canLoan","_book$loans","coverUrl","cover","startsWith","bookLabel","title","author","publication_year","genre","available","className","role","trim","children","src","alt","altText","loading","fileName","_jsxFileName","lineNumber","columnNumber","loans","length","map","loan","user_username","username","filter","Boolean","join","speak","type","onClick","bookId","id","_c","propTypes","shape","oneOfType","number","string","isRequired","bool","arrayOf","func","$RefreshReg$"],"sources":["C:/Users/MARCIOJOSEDOSSANTOS/Desktop/tentativas/biblioteca/frontend/src/components/BookCard.js"],"sourcesContent":["// src/components/BookCard.js\r\nimport React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"./bookcard.css\";\r\nimport noCover from \"../assets/no-cover.png\";\r\nimport LoanButton from \"./LoanButton\";\r\n\r\nexport default function BookCard({ book, refreshBooks = null, canLoan = false }) {\r\n  // ðŸ”¹ Define URL completa da capa (caso backend retorne apenas caminho relativo)\r\n  const coverUrl = book.cover\r\n    ? book.cover.startsWith(\"http\")\r\n      ? book.cover\r\n      : `http://127.0.0.1:8000${book.cover}`\r\n    : noCover;\r\n\r\n  // ðŸ”¹ Texto descritivo para acessibilidade\r\n  const bookLabel = `\r\n    Livro: ${book.title || \"Sem tÃ­tulo\"}.\r\n    Autor: ${book.author || \"NÃ£o informado\"}.\r\n    ${book.publication_year ? `Ano: ${book.publication_year}.` : \"\"}\r\n    ${book.genre ? `GÃªnero: ${book.genre}.` : \"\"}\r\n    Status: ${book.available ? \"DisponÃ­vel\" : \"Emprestado\"}.\r\n  `;\r\n\r\n  return (\r\n    <article\r\n      className={`book-card ${!book.available ? \"unavailable\" : \"\"}`}\r\n      role=\"region\"\r\n      aria-label={bookLabel.trim()}\r\n    >\r\n      <img\r\n        src={coverUrl}\r\n        alt={book.altText || `Capa do livro \"${book.title || \"Sem tÃ­tulo\"}\"`}\r\n        className=\"book-cover\"\r\n        loading=\"lazy\"\r\n      />\r\n\r\n      <div className=\"book-info\">\r\n        <h2>{book.title || \"Sem tÃ­tulo\"}</h2>\r\n\r\n        <p>\r\n          <strong>Autor:</strong> {book.author || \"NÃ£o informado\"}\r\n        </p>\r\n\r\n        {book.publication_year && (\r\n          <p>\r\n            <strong>Ano:</strong> {book.publication_year}\r\n          </p>\r\n        )}\r\n\r\n        {book.genre && (\r\n          <p>\r\n            <strong>GÃªnero:</strong> {book.genre}\r\n          </p>\r\n        )}\r\n\r\n        <p>\r\n          <strong>Status:</strong>{\" \"}\r\n          {book.available ? \"DisponÃ­vel\" : \"Emprestado\"}\r\n        </p>\r\n\r\n        {book.loans?.length > 0 && (\r\n          <p>\r\n            <strong>Emprestado para:</strong>{\" \"}\r\n            {book.loans\r\n              .map((loan) => loan.user_username || loan.username)\r\n              .filter(Boolean)\r\n              .join(\", \")}\r\n          </p>\r\n        )}\r\n\r\n        {/* ðŸ”Š BotÃ£o de leitura por voz */}\r\n        {book.speak && (\r\n          <button\r\n            type=\"button\"\r\n            onClick={book.speak}\r\n            className=\"speak-button\"\r\n            aria-label={`Ouvir informaÃ§Ãµes do livro ${book.title}`}\r\n          >\r\n            ðŸ”Š Ouvir\r\n          </button>\r\n        )}\r\n\r\n        {/* \r\n          ðŸ“˜ EmprÃ©stimo\r\n          ðŸ”¥ Exibido SOMENTE para admin/superuser\r\n          ðŸ”¥ SÃ³ aparece se o livro estiver disponÃ­vel\r\n        */}\r\n        {canLoan && book.available && refreshBooks && (\r\n          <LoanButton bookId={book.id} refreshBooks={refreshBooks} />\r\n        )}\r\n      </div>\r\n    </article>\r\n  );\r\n}\r\n\r\nBookCard.propTypes = {\r\n  book: PropTypes.shape({\r\n    id: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\r\n    title: PropTypes.string.isRequired,\r\n    author: PropTypes.string,\r\n    publication_year: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n    genre: PropTypes.string,\r\n    cover: PropTypes.string,\r\n    altText: PropTypes.string,\r\n    available: PropTypes.bool,\r\n    loans: PropTypes.arrayOf(\r\n      PropTypes.shape({\r\n        username: PropTypes.string,\r\n        user_username: PropTypes.string,\r\n      })\r\n    ),\r\n    speak: PropTypes.func,\r\n  }).isRequired,\r\n  refreshBooks: PropTypes.func,\r\n  canLoan: PropTypes.bool,  // ðŸ”¥ nova propriedade\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}