{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MARCIOJOSEDOSSANTOS\\\\Desktop\\\\tentativas\\\\biblioteca\\\\frontend\\\\src\\\\components\\\\BookForm.js\",\n  _s = $RefreshSig$();\n// src/components/BookForm.js\nimport React, { useState } from \"react\";\nimport \"../assets/styles.css\";\nimport { createBook } from \"../Api\"; // usa a API real\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function BookForm({\n  onSave,\n  role\n}) {\n  _s();\n  const [formData, setFormData] = useState({\n    title: \"\",\n    author: \"\",\n    publication_year: \"\",\n    genre: \"\",\n    cover: null\n  });\n  const [message, setMessage] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  // üîí Somente superusu√°rio pode cadastrar\n  if (role !== \"superuser\") {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      tabIndex: \"0\",\n      role: \"alert\",\n      className: \"access-denied\",\n      children: \"\\u26A0\\uFE0F Acesso negado. Apenas superusu\\xE1rios podem cadastrar livros.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Atualiza valores\n  const handleChange = e => {\n    const {\n      id,\n      value,\n      files\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [id]: files ? files[0] : value\n    }));\n  };\n\n  // Envia para o backend\n  async function handleSubmit(e) {\n    e.preventDefault();\n    setLoading(true);\n    setMessage(\"\");\n    try {\n      const data = new FormData();\n      Object.entries(formData).forEach(([key, value]) => {\n        if (value) data.append(key, value);\n      });\n      await createBook(data);\n      setMessage(\"‚úÖ Livro cadastrado com sucesso!\");\n\n      // Limpa o formul√°rio\n      setFormData({\n        title: \"\",\n        author: \"\",\n        publication_year: \"\",\n        genre: \"\",\n        cover: null\n      });\n      if (onSave) onSave(); // Atualiza lista no AdminPanel\n    } catch (error) {\n      console.error(\"Erro ao salvar livro:\", error);\n      setMessage(\"‚ùå Erro ao cadastrar o livro.\");\n    } finally {\n      setLoading(false);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"book-form\",\n    onSubmit: handleSubmit,\n    \"aria-label\": \"Formul\\xE1rio de cadastro de livro\",\n    encType: \"multipart/form-data\",\n    children: [/*#__PURE__*/_jsxDEV(\"fieldset\", {\n      disabled: loading,\n      children: [/*#__PURE__*/_jsxDEV(\"legend\", {\n        tabIndex: \"0\",\n        children: \"\\uD83D\\uDCD8 Cadastro de Livro\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"title\",\n        children: \"T\\xEDtulo:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"title\",\n        type: \"text\",\n        placeholder: \"Digite o t\\xEDtulo do livro\",\n        value: formData.title,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"author\",\n        children: \"Autor:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"author\",\n        type: \"text\",\n        placeholder: \"Digite o nome do autor\",\n        value: formData.author,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"publication_year\",\n        children: \"Ano de Publica\\xE7\\xE3o:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"publication_year\",\n        type: \"number\",\n        placeholder: \"Ex: 2024\",\n        value: formData.publication_year,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"genre\",\n        children: \"G\\xEAnero:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"genre\",\n        type: \"text\",\n        placeholder: \"Ex: Fic\\xE7\\xE3o, Romance, T\\xE9cnico...\",\n        value: formData.genre,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"cover\",\n        children: \"Capa (opcional):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"cover\",\n        type: \"file\",\n        accept: \"image/*\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loading,\n        children: loading ? \"Salvando...\" : \"Salvar Livro\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      role: \"status\",\n      \"aria-live\": \"polite\",\n      tabIndex: \"0\",\n      className: `form-message ${message.includes(\"sucesso\") ? \"success\" : \"error\"}`,\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n_s(BookForm, \"+5RoWKBAvbdHHSuW9xEuLVcVezY=\");\n_c = BookForm;\nvar _c;\n$RefreshReg$(_c, \"BookForm\");","map":{"version":3,"names":["React","useState","createBook","jsxDEV","_jsxDEV","BookForm","onSave","role","_s","formData","setFormData","title","author","publication_year","genre","cover","message","setMessage","loading","setLoading","tabIndex","className","children","fileName","_jsxFileName","lineNumber","columnNumber","handleChange","e","id","value","files","target","prev","handleSubmit","preventDefault","data","FormData","Object","entries","forEach","key","append","error","console","onSubmit","encType","disabled","htmlFor","type","placeholder","onChange","required","accept","includes","_c","$RefreshReg$"],"sources":["C:/Users/MARCIOJOSEDOSSANTOS/Desktop/tentativas/biblioteca/frontend/src/components/BookForm.js"],"sourcesContent":["// src/components/BookForm.js\r\nimport React, { useState } from \"react\";\r\nimport \"../assets/styles.css\";\r\nimport { createBook } from \"../Api\"; // usa a API real\r\n\r\nexport default function BookForm({ onSave, role }) {\r\n  const [formData, setFormData] = useState({\r\n    title: \"\",\r\n    author: \"\",\r\n    publication_year: \"\",\r\n    genre: \"\",\r\n    cover: null,\r\n  });\r\n\r\n  const [message, setMessage] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // üîí Somente superusu√°rio pode cadastrar\r\n  if (role !== \"superuser\") {\r\n    return (\r\n      <p tabIndex=\"0\" role=\"alert\" className=\"access-denied\">\r\n        ‚ö†Ô∏è Acesso negado. Apenas superusu√°rios podem cadastrar livros.\r\n      </p>\r\n    );\r\n  }\r\n\r\n  // Atualiza valores\r\n  const handleChange = (e) => {\r\n    const { id, value, files } = e.target;\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [id]: files ? files[0] : value,\r\n    }));\r\n  };\r\n\r\n  // Envia para o backend\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setMessage(\"\");\r\n\r\n    try {\r\n      const data = new FormData();\r\n      Object.entries(formData).forEach(([key, value]) => {\r\n        if (value) data.append(key, value);\r\n      });\r\n\r\n      await createBook(data);\r\n      setMessage(\"‚úÖ Livro cadastrado com sucesso!\");\r\n\r\n      // Limpa o formul√°rio\r\n      setFormData({\r\n        title: \"\",\r\n        author: \"\",\r\n        publication_year: \"\",\r\n        genre: \"\",\r\n        cover: null,\r\n      });\r\n\r\n      if (onSave) onSave(); // Atualiza lista no AdminPanel\r\n    } catch (error) {\r\n      console.error(\"Erro ao salvar livro:\", error);\r\n      setMessage(\"‚ùå Erro ao cadastrar o livro.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form\r\n      className=\"book-form\"\r\n      onSubmit={handleSubmit}\r\n      aria-label=\"Formul√°rio de cadastro de livro\"\r\n      encType=\"multipart/form-data\"\r\n    >\r\n      <fieldset disabled={loading}>\r\n        <legend tabIndex=\"0\">üìò Cadastro de Livro</legend>\r\n\r\n        <label htmlFor=\"title\">T√≠tulo:</label>\r\n        <input\r\n          id=\"title\"\r\n          type=\"text\"\r\n          placeholder=\"Digite o t√≠tulo do livro\"\r\n          value={formData.title}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n\r\n        <label htmlFor=\"author\">Autor:</label>\r\n        <input\r\n          id=\"author\"\r\n          type=\"text\"\r\n          placeholder=\"Digite o nome do autor\"\r\n          value={formData.author}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n\r\n        <label htmlFor=\"publication_year\">Ano de Publica√ß√£o:</label>\r\n        <input\r\n          id=\"publication_year\"\r\n          type=\"number\"\r\n          placeholder=\"Ex: 2024\"\r\n          value={formData.publication_year}\r\n          onChange={handleChange}\r\n        />\r\n\r\n        <label htmlFor=\"genre\">G√™nero:</label>\r\n        <input\r\n          id=\"genre\"\r\n          type=\"text\"\r\n          placeholder=\"Ex: Fic√ß√£o, Romance, T√©cnico...\"\r\n          value={formData.genre}\r\n          onChange={handleChange}\r\n        />\r\n\r\n        <label htmlFor=\"cover\">Capa (opcional):</label>\r\n        <input id=\"cover\" type=\"file\" accept=\"image/*\" onChange={handleChange} />\r\n\r\n        <button type=\"submit\" disabled={loading}>\r\n          {loading ? \"Salvando...\" : \"Salvar Livro\"}\r\n        </button>\r\n      </fieldset>\r\n\r\n      {message && (\r\n        <p\r\n          role=\"status\"\r\n          aria-live=\"polite\"\r\n          tabIndex=\"0\"\r\n          className={`form-message ${\r\n            message.includes(\"sucesso\") ? \"success\" : \"error\"\r\n          }`}\r\n        >\r\n          {message}\r\n        </p>\r\n      )}\r\n    </form>\r\n  );\r\n}"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAO,sBAAsB;AAC7B,SAASC,UAAU,QAAQ,QAAQ,CAAC,CAAC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAErC,eAAe,SAASC,QAAQA,CAAC;EAAEC,MAAM;EAAEC;AAAK,CAAC,EAAE;EAAAC,EAAA;EACjD,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGT,QAAQ,CAAC;IACvCU,KAAK,EAAE,EAAE;IACTC,MAAM,EAAE,EAAE;IACVC,gBAAgB,EAAE,EAAE;IACpBC,KAAK,EAAE,EAAE;IACTC,KAAK,EAAE;EACT,CAAC,CAAC;EAEF,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACiB,OAAO,EAAEC,UAAU,CAAC,GAAGlB,QAAQ,CAAC,KAAK,CAAC;;EAE7C;EACA,IAAIM,IAAI,KAAK,WAAW,EAAE;IACxB,oBACEH,OAAA;MAAGgB,QAAQ,EAAC,GAAG;MAACb,IAAI,EAAC,OAAO;MAACc,SAAS,EAAC,eAAe;MAAAC,QAAA,EAAC;IAEvD;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC;EAER;;EAEA;EACA,MAAMC,YAAY,GAAIC,CAAC,IAAK;IAC1B,MAAM;MAAEC,EAAE;MAAEC,KAAK;MAAEC;IAAM,CAAC,GAAGH,CAAC,CAACI,MAAM;IACrCtB,WAAW,CAAEuB,IAAI,KAAM;MACrB,GAAGA,IAAI;MACP,CAACJ,EAAE,GAAGE,KAAK,GAAGA,KAAK,CAAC,CAAC,CAAC,GAAGD;IAC3B,CAAC,CAAC,CAAC;EACL,CAAC;;EAED;EACA,eAAeI,YAAYA,CAACN,CAAC,EAAE;IAC7BA,CAAC,CAACO,cAAc,CAAC,CAAC;IAClBhB,UAAU,CAAC,IAAI,CAAC;IAChBF,UAAU,CAAC,EAAE,CAAC;IAEd,IAAI;MACF,MAAMmB,IAAI,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC3BC,MAAM,CAACC,OAAO,CAAC9B,QAAQ,CAAC,CAAC+B,OAAO,CAAC,CAAC,CAACC,GAAG,EAAEX,KAAK,CAAC,KAAK;QACjD,IAAIA,KAAK,EAAEM,IAAI,CAACM,MAAM,CAACD,GAAG,EAAEX,KAAK,CAAC;MACpC,CAAC,CAAC;MAEF,MAAM5B,UAAU,CAACkC,IAAI,CAAC;MACtBnB,UAAU,CAAC,iCAAiC,CAAC;;MAE7C;MACAP,WAAW,CAAC;QACVC,KAAK,EAAE,EAAE;QACTC,MAAM,EAAE,EAAE;QACVC,gBAAgB,EAAE,EAAE;QACpBC,KAAK,EAAE,EAAE;QACTC,KAAK,EAAE;MACT,CAAC,CAAC;MAEF,IAAIT,MAAM,EAAEA,MAAM,CAAC,CAAC,CAAC,CAAC;IACxB,CAAC,CAAC,OAAOqC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAC7C1B,UAAU,CAAC,8BAA8B,CAAC;IAC5C,CAAC,SAAS;MACRE,UAAU,CAAC,KAAK,CAAC;IACnB;EACF;EAEA,oBACEf,OAAA;IACEiB,SAAS,EAAC,WAAW;IACrBwB,QAAQ,EAAEX,YAAa;IACvB,cAAW,oCAAiC;IAC5CY,OAAO,EAAC,qBAAqB;IAAAxB,QAAA,gBAE7BlB,OAAA;MAAU2C,QAAQ,EAAE7B,OAAQ;MAAAI,QAAA,gBAC1BlB,OAAA;QAAQgB,QAAQ,EAAC,GAAG;QAAAE,QAAA,EAAC;MAAoB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAElDtB,OAAA;QAAO4C,OAAO,EAAC,OAAO;QAAA1B,QAAA,EAAC;MAAO;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACtCtB,OAAA;QACEyB,EAAE,EAAC,OAAO;QACVoB,IAAI,EAAC,MAAM;QACXC,WAAW,EAAC,6BAA0B;QACtCpB,KAAK,EAAErB,QAAQ,CAACE,KAAM;QACtBwC,QAAQ,EAAExB,YAAa;QACvByB,QAAQ;MAAA;QAAA7B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACT,CAAC,eAEFtB,OAAA;QAAO4C,OAAO,EAAC,QAAQ;QAAA1B,QAAA,EAAC;MAAM;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACtCtB,OAAA;QACEyB,EAAE,EAAC,QAAQ;QACXoB,IAAI,EAAC,MAAM;QACXC,WAAW,EAAC,wBAAwB;QACpCpB,KAAK,EAAErB,QAAQ,CAACG,MAAO;QACvBuC,QAAQ,EAAExB,YAAa;QACvByB,QAAQ;MAAA;QAAA7B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACT,CAAC,eAEFtB,OAAA;QAAO4C,OAAO,EAAC,kBAAkB;QAAA1B,QAAA,EAAC;MAAkB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAC5DtB,OAAA;QACEyB,EAAE,EAAC,kBAAkB;QACrBoB,IAAI,EAAC,QAAQ;QACbC,WAAW,EAAC,UAAU;QACtBpB,KAAK,EAAErB,QAAQ,CAACI,gBAAiB;QACjCsC,QAAQ,EAAExB;MAAa;QAAAJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxB,CAAC,eAEFtB,OAAA;QAAO4C,OAAO,EAAC,OAAO;QAAA1B,QAAA,EAAC;MAAO;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACtCtB,OAAA;QACEyB,EAAE,EAAC,OAAO;QACVoB,IAAI,EAAC,MAAM;QACXC,WAAW,EAAC,0CAAiC;QAC7CpB,KAAK,EAAErB,QAAQ,CAACK,KAAM;QACtBqC,QAAQ,EAAExB;MAAa;QAAAJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxB,CAAC,eAEFtB,OAAA;QAAO4C,OAAO,EAAC,OAAO;QAAA1B,QAAA,EAAC;MAAgB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAC/CtB,OAAA;QAAOyB,EAAE,EAAC,OAAO;QAACoB,IAAI,EAAC,MAAM;QAACI,MAAM,EAAC,SAAS;QAACF,QAAQ,EAAExB;MAAa;QAAAJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAEzEtB,OAAA;QAAQ6C,IAAI,EAAC,QAAQ;QAACF,QAAQ,EAAE7B,OAAQ;QAAAI,QAAA,EACrCJ,OAAO,GAAG,aAAa,GAAG;MAAc;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CAAC,EAEVV,OAAO,iBACNZ,OAAA;MACEG,IAAI,EAAC,QAAQ;MACb,aAAU,QAAQ;MAClBa,QAAQ,EAAC,GAAG;MACZC,SAAS,EAAE,gBACTL,OAAO,CAACsC,QAAQ,CAAC,SAAS,CAAC,GAAG,SAAS,GAAG,OAAO,EAChD;MAAAhC,QAAA,EAEFN;IAAO;MAAAO,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACP,CACJ;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACG,CAAC;AAEX;AAAClB,EAAA,CArIuBH,QAAQ;AAAAkD,EAAA,GAARlD,QAAQ;AAAA,IAAAkD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}